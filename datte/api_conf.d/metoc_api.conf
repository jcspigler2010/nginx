# metoc API for EDH
#
location /api/metoc/ {
  proxy_http_version 1.1;
  proxy_set_header   "Connection" "";

   #policy configuration goes here (auth, rate limiting, logging ...)
   #
   #access_log /var/log/nginx/metoc_api.log main;
   access_log /var/log/nginx/metoc_api.log combined;
   error_log /var/log/nginx/metoc_api_error.log debug;

   #URI routing
   #
   location /api/metoc/edh {
     proxy_http_version 1.1;
     proxy_set_header   "Connection" "";
     proxy_set_header Host $http_host;
      # proxy_pass http://metoc_edh/;
      proxy_pass http://metoc_edh/$1$is_args$args;
      rewrite    /api/metoc/edh /(.*) /$1 break;
      error_log /var/log/nginx/metoc_api_edh_error.log debug;
   }

   # location /api/metoc/edhwin {
   #   proxy_http_version 1.1;
   #   proxy_set_header   "Connection" "";
   #    proxy_pass http://metoc_edhwin/api/v1/;
   # }

   return 404; # catch-all
}
